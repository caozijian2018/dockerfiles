webpackJsonp([4],{"/C0T":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"1JlR":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n@media screen and (min-width: 900px) {\n#rule_box .changepassword_ .el-dialog {\n    width: 30%;\n}\n}\n",""])},"3xMz":function(t,e,i){"use strict";var s={components:{star:i("riDf").a},data:function(){return{app_arr:[],app:""}},props:{appId:{},onlySelect:{type:Boolean,default:!1}},computed:{app_id:{get:function(){return this.appId},set:function(t){this.$emit("seletApp",t)}}},mounted:function(){this.getApps()},methods:{seletApp:function(t){this.$emit("seletApp",t)},getApps:function(){var t=this;this.$request_any("apps","get",{capacity:1e4}).then(function(e){t.app_arr=e.data.results})}}},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.onlySelect?i("el-select",{staticClass:"width_100",attrs:{filterable:"",clearable:"",placeholder:t.$t("validate.app")},model:{value:t.app_id,callback:function(e){t.app_id=e},expression:"app_id"}},t._l(t.app_arr,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v("\n            "+t._s(t.$t("table.app"))+"\n            "),i("star"),t._v(":\n        ")],1),t._v(" "),i("el-select",{staticClass:"width_100",attrs:{filterable:"",clearable:"",placeholder:t.$t("validate.app")},model:{value:t.app_id,callback:function(e){t.app_id=e},expression:"app_id"}},t._l(t.app_arr,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]},l=n;var o=!1;var r=i("VU/8")(s,l,!1,function(t){o||i("JjC0")},null,null);r.options.__file="src/components/app_list/index.vue";e.a=r.exports},"5fte":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"9zVR":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n#add_company label {\n  width: 130px !important;\n}\n@media screen and (max-width: 900px) {\n.el-dialog {\n    width: 90%;\n}\n}\n",""])},FKrf:function(t,e,i){var s=i("Jiy/");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("5a1ac63a",s,!1)},HKHn:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n@media screen and (min-width: 900px) {\n#rule_box .el-dialog {\n    width: 60%;\n}\n.dialogOuters .el-dialog {\n    width: 55%;\n}\n}\n",""])},"Jiy/":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},JjC0:function(t,e,i){var s=i("ccTV");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("396d1ecd",s,!1)},MqGp:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},bAyM:function(t,e,i){var s=i("gN0+");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("93f9a0b0",s,!1)},ccTV:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"gN0+":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n@media screen and (min-width: 900px) {\n#rule_box .el-dialog {\n    width: 60%;\n}\n.dialogOuters .el-dialog {\n    width: 55%;\n}\n}\n",""])},gNCv:function(t,e,i){var s=i("njvC");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("c3323776",s,!1)},"j/1z":function(t,e,i){var s=i("xMC4");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("362c86e3",s,!1)},jIiQ:function(t,e,i){var s=i("5fte");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("986fe60a",s,!1)},jh4c:function(t,e,i){var s=i("HKHn");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("67cbd700",s,!1)},"nP+e":function(t,e,i){var s=i("/C0T");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("0fbf6436",s,!1)},njvC:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},riDf:function(t,e,i){"use strict";var s={props:{notMatch:{type:Boolean}},watch:{notMatch:function(t){var e=this;t&&(this.not_match_=!0,setTimeout(function(){e.not_match_=!1},222e3))}},data:function(){return{not_match_:!1}}},a=function(){var t=this.$createElement,e=this._self._c||t;return e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:this.$t("table.this_is_required"),placement:"top"}},[e("i",{staticClass:" iconfont icon-xingxing animated",class:{shake:this.not_match_},staticStyle:{color:"#e4393c","font-size":"10px"}})])};a._withStripped=!0;var n={render:a,staticRenderFns:[]},l=n;var o=!1;var r=i("VU/8")(s,l,!1,function(t){o||i("nP+e")},null,null);r.options.__file="src/components/star/index.vue";e.a=r.exports},ucTt:function(t,e,i){var s=i("MqGp");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("bd8a64ee",s,!1)},xMC4:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"y/9Q":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("gI4u"),a=(i("xjXP"),[{element:".create_company",popover:{title:"创建公司",position:"left"}},{element:".create_user",popover:{title:"创建用户",position:"left"}},{element:".first_tr_updata",popover:{title:"修改公司",position:"left"}},{element:".first_tr_rules",popover:{title:"修改角色",position:"left"}},{element:".first_tr_userlist",popover:{title:"用户列表",position:"left"}}]),n=i("mvHQ"),l=i.n(n),o={props:{showCompany:{type:Boolean},companyObj:{type:Object}},data:function(){return{company_name:"",iscreatNew:!0,domain:"",traking_domain:"",describe:"",admin_user:"",admin_pwd:"",status:!0,postback_alias:{app:"app",event:"event",refId:"refId",revenue:"revenue"}}},computed:{showCompany_:{get:function(){return this.showCompany},set:function(){this.$emit("close")}}},methods:{setTrakEmpty:function(){this.company_name="",this.domain="",this.traking_domain="",this.describe="",this.admin_user="",this.admin_pwd="",this.status=!0,this.postback_alias={app:"app",event:"event",refId:"refId",revenue:"revenue"}},open:function(){var t=this.companyObj;t?(this.iscreatNew=!1,this.describe=t.desc,this.traking_domain=t.tracking_domain,this.status=t.status,this.postback_alias=t.postback_alias,this.company_name=t.name):(this.iscreatNew=!0,this.setTrakEmpty())},vaifyCompany:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.validate_input.check(this.company_name,"has_val")?t&&!this.validate_input.check(this.domain,"http")?"validate.domain":t&&!this.validate_input.check(this.admin_user)?"validate.company_username":t&&!this.validate_input.check(this.admin_pwd,"login_password_reg")?"validate.password":void 0:"validate.name_empth"},createOrUpdateCompany:function(){var t=this,e=this.vaifyCompany(!!this.iscreatNew);if(e)this.$msg(this.$t(e),"error");else{var i=this.iscreatNew?{name:this.company_name,domain:this.domain,tracking_domain:this.traking_domain,status:this.status,admin_user:this.admin_user,admin_pwd:this.admin_pwd,desc:this.describe?this.describe:this.company_name,postback_alias:l()(this.postback_alias)}:{name:this.company_name,desc:this.describe,tracking_domain:this.traking_domain,status:this.status,postback_alias:l()(this.postback_alias)};this.$request_any(this.iscreatNew?"company":"company/"+this.companyObj.id+"/",this.iscreatNew?"post":"patch",i).then(function(e){t.$msg(t.$t("table.success")),t.$emit("close",!0)})}}}},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:t.iscreatNew?"Create":"Edit",visible:t.showCompany_},on:{"update:visible":function(e){t.showCompany_=e},open:function(e){t.open()}}},[t.iscreatNew?i("div",[i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.website"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.domain,callback:function(e){t.domain=e},expression:"domain"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.administrator"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:"Please input"},model:{value:t.admin_user,callback:function(e){t.admin_user=e},expression:"admin_user"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.administrator_password"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:"Please input"},model:{value:t.admin_pwd,callback:function(e){t.admin_pwd=e},expression:"admin_pwd"}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.companyname"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.company_name,callback:function(e){t.company_name=e},expression:"company_name"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.describe"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.describe,callback:function(e){t.describe=e},expression:"describe"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.traking_domain"))+":")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.traking_domain,callback:function(e){t.traking_domain=e},expression:"traking_domain"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v("alias app:")]),t._v(" "),i("el-input",{model:{value:t.postback_alias.app,callback:function(e){t.$set(t.postback_alias,"app",e)},expression:"postback_alias.app"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v("alias event:")]),t._v(" "),i("el-input",{model:{value:t.postback_alias.event,callback:function(e){t.$set(t.postback_alias,"event",e)},expression:"postback_alias.event"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v("alias refId:")]),t._v(" "),i("el-input",{model:{value:t.postback_alias.refId,callback:function(e){t.$set(t.postback_alias,"refId",e)},expression:"postback_alias.refId"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v("alias revenue:")]),t._v(" "),i("el-input",{model:{value:t.postback_alias.revenue,callback:function(e){t.$set(t.postback_alias,"revenue",e)},expression:"postback_alias.revenue"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 margin_top_10 flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.state"))+":")]),t._v(" "),i("el-switch",{staticClass:"margin_top_10 width_100",attrs:{"active-text":t.$t("table.active"),"inactive-text":t.$t("table.disable")},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createOrUpdateCompany()}}},[t._v(t._s(t.$t("table.confirm")))])],1)])],1)};r._withStripped=!0;var c={render:r,staticRenderFns:[]},_=c;var u=!1;var p=i("VU/8")(o,_,!1,function(t){u||i("jIiQ")},null,null);p.options.__file="src/views/companylist/components/index.vue";var d=p.exports,m=i("3xMz"),h=i("hlVY"),v=i("BO1k"),f=i.n(v),b={props:{permissions:{type:Array,default:function(){return[]}}},mounted:function(){this.getRulist()},data:function(){return{rule_results:[]}},computed:{permissions_:{get:function(){var t=[],e=!0,i=!1,s=void 0;try{for(var a,n=f()(this.permissions);!(e=(a=n.next()).done);e=!0){var l=a.value;t.push(l.id)}}catch(t){i=!0,s=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw s}}return t},set:function(t){this.$emit("selectRule",t)}}},methods:{getRulist:function(){var t=this;this.$request_any("permissions","get",{capacity:1e4}).then(function(e){t.rule_results=e.data.results})}}},y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-select",{attrs:{filterable:"",multiple:"",placeholder:t.$t("table.select_rule")},model:{value:t.permissions_,callback:function(e){t.permissions_=e},expression:"permissions_"}},t._l(t.rule_results,function(t){return i("el-option",{key:t.id,attrs:{label:t.desc,value:t.id}})}))],1)};y._withStripped=!0;var g={render:y,staticRenderFns:[]},w=g;var x=!1;var $=i("VU/8")(b,w,!1,function(t){x||i("FKrf")},null,null);$.options.__file="src/components/rules_select/index.vue";var C=$.exports,k={props:{companyId:{type:Number},innerVisible:{type:Boolean},ruleObj:{type:Object}},components:{ruleSelect:C},data:function(){return{permissions:[],status:!0,desc:"",name:"",isUpdata:"",rule_id:""}},computed:{innerVisible_:{get:function(){return this.innerVisible},set:function(){this.$emit("creatUserRuleSuccess")}}},methods:{vaify:function(){return this.validate_input.check(this.name)?this.validate_input.check(this.desc)?this.permissions.length?void 0:"validate.permission":"validate.describe":"validate.role_name"},openRule:function(){var t=this.ruleObj;this.isUpdata=!!t,this.ruleObj?(this.permissions=t.perms,this.status=t.status,this.desc=t.desc,this.name=t.name,this.rule_id=t.id):this.setEmpty()},setEmpty:function(){this.permissions=[],this.status=!0,this.desc="",this.name=""},cloeseCreatUserRule:function(){},selectRule:function(t){var e=[],i=!0,s=!1,a=void 0;try{for(var n,l=f()(t);!(i=(n=l.next()).done);i=!0){var o=n.value,r={};r.id=o,e.push(r)}}catch(t){s=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw a}}this.permissions=e},creatRuleUser:function(){var t=this,e=this.vaify();if(e)this.$msg(this.$t(e),"error");else{var i=[],s=!0,a=!1,n=void 0;try{for(var l,o=f()(this.permissions);!(s=(l=o.next()).done);s=!0){var r=l.value;i.push(r.id)}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}var c={company_id:this.companyId,name:this.name,desc:this.desc,permissions:i,status:this.status},_=this.isUpdata;this.$request_any(_?"role/"+this.rule_id+"/":"role",_?"patch":"post",c).then(function(e){t.$msg(t.$t("table.success")),t.$emit("creatUserRuleSuccess")}).catch(function(t){console.log(t)})}}}},j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"dialogOuters",attrs:{title:t.$t("table.create_role"),visible:t.innerVisible_,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible_=e},close:t.cloeseCreatUserRule,open:function(e){t.openRule()}}},[i("div",{staticClass:"display_flex media_flex_row_800  flex_align_center"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.role_name"))+": ")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800  flex_align_center margin_top_1"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.describe"))+": ")]),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:t.$t("table.please_input")},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800  flex_align_center margin_top_1"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.permissions"))+" ")]),t._v(" "),i("rule-select",{staticClass:"width_100",attrs:{permissions:t.permissions},on:{selectRule:t.selectRule}})],1),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800  flex_align_center margin_top_1"},[i("div",{staticClass:"media_width_20_800"},[t._v(t._s(t.$t("table.state"))+" ")]),t._v(" "),i("el-switch",{staticClass:"margin_top_10 width_100",attrs:{"active-text":t.$t("table.active"),"inactive-text":t.$t("table.disable")},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer overflow_hidden",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"float_right",attrs:{type:"primary"},on:{click:function(e){t.creatRuleUser()}}},[t._v(t._s(t.$t("table.confirm")))])],1)])};j._withStripped=!0;var S={render:j,staticRenderFns:[]},R=S;var U=!1;var D=i("VU/8")(k,R,!1,function(t){U||i("j/1z")},null,null);D.options.__file="src/components/creat_rule/index.vue";var z=D.exports,V={props:{showTrakPage:{type:Boolean},companyId:{}},mounted:function(){},data:function(){return{listLoading:!0,innerVisible:!1,rule_list:[],rule_obj:null}},methods:{open:function(){this.listLoading=!0,this.getCompanyRulelist()},EditRule:function(t){this.rule_obj=t,this.innerVisible=!0},addUseruls:function(){this.rule_obj=null,this.innerVisible=!0},cloeseCreatUserRule:function(t){this.innerVisible=!1,this.getCompanyRulelist()},getCompanyRulelist:function(){var t=this;this.$request_any("role/list/"+this.companyId+"/","get").then(function(e){t.rule_list=e.data.roles,t.listLoading=!1})},selectRule:function(t){this.roles=t},choseTime:function(t){this.timezone=t},seletApp:function(t){this.company=t}},computed:{showDiv:{get:function(){return this.showTrakPage},set:function(t){this.$emit("closeDiv")}}},components:{appList:m.a,timeZone:h.a,rulesSelect:C,creatRule:z}},O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"rule_box"}},[i("el-dialog",{attrs:{title:t.$t("table.role_list"),visible:t.showDiv},on:{open:t.open,"update:visible":function(e){t.showDiv=e}}},[i("creat-rule",{ref:"ruleRef",attrs:{ruleObj:t.rule_obj,innerVisible:t.innerVisible,"company-id":t.companyId},on:{creatUserRuleSuccess:t.cloeseCreatUserRule}}),t._v(" "),i("div",{staticClass:"filter-container"},[t.show_add_rule?i("el-button",{staticClass:"filter-item float_right",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){t.addUseruls()}}},[t._v(t._s(t.$t("table.add_rule_user")))]):t._e()],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.rule_list,border:""}},[i("el-table-column",{attrs:{align:"center",prop:"name",label:t.$t("table.role_name")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"desc",label:t.$t("table.role_desc")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.state")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("table.active")))]):i("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("table.disable")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.permissions")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.perms,function(e){return i("el-tag",{key:e.id,staticClass:"margin_bottom_1 display_block",attrs:{type:"success"}},[t._v(t._s(e.desc))])})}}])}),t._v(" "),t.show_one_edit_rules?i("el-table-column",{attrs:{align:"center",label:t.$t("table.edit"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.show_one_edit_rules?i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){t.EditRule(e.row)}}},[t._v(t._s(t.$t("table.edit")))]):t._e()]}}])}):t._e()],1)],1)],1)};O._withStripped=!0;var I={render:O,staticRenderFns:[]},F=I;var E=!1;var T=i("VU/8")(V,F,!1,function(t){E||i("bAyM")},null,null);T.options.__file="src/components/role_edit/index.vue";var P=T.exports,L=i("Idch"),N={props:{roles:{type:Array,default:function(){return[]}},companyId:{default:1}},watch:{companyId:function(t){this.getRulist(t)}},mounted:function(){this.getRulist(this.companyId)},data:function(){return{rule_results:[]}},computed:{permissions_:{get:function(){return this.roles},set:function(t){this.$emit("selectRule",t)}}},methods:{getRulist:function(t){var e=this;this.$request_any("role/list/"+t+"/").then(function(t){e.rule_results=t.data.roles})}}},q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-select",{attrs:{filterable:"",multiple:"",placeholder:"please select"},model:{value:t.permissions_,callback:function(e){t.permissions_=e},expression:"permissions_"}},t._l(t.rule_results,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)};q._withStripped=!0;var M={render:q,staticRenderFns:[]},A=M;var Z=!1;var B=i("VU/8")(N,A,!1,function(t){Z||i("ucTt")},null,null);B.options.__file="src/components/company_rules/index.vue";var J=B.exports,H={props:{showTrakPage:{type:Boolean},userObj:{type:Object}},data:function(){return{innerVisible:!1,company:"",username:"",email:"",password:"",roles:[],timezone:"",status:!0,is_creat_new:!0,user_id:"",default_url:"",companyVal:[]}},methods:{vaifyUserUpdata:function(){return this.validate_input.check(this.email,"email")?this.validate_input.check(this.timezone)?this.roles.length?void 0:"validate.roles":"validate.timezone":"validate.email"},vaify:function(){return this.company?this.validate_input.check(this.username)?this.validate_input.check(this.email,"email")?this.validate_input.check(this.password,"login_password_reg")?this.validate_input.check(this.timezone)?this.roles.length?void 0:"validate.roles":"validate.timezone":"validate.password":"validate.email":"validate.name_empth":"validate.company"},open:function(){var t=this.userObj;if(t){this.company=t.company_id,this.user_id=t.id,this.is_creat_new=!1;var e=t.roles,i=[],s=!0,a=!1,n=void 0;try{for(var l,o=f()(e);!(s=(l=o.next()).done);s=!0){var r=l.value;i.push(r.id)}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}this.email=t.email,this.roles=i,this.default_url=t.default_url,this.timezone=String(t.timezone),this.status=t.status}else this.company="",this.user_id="",this.is_creat_new=!0,this.email="",this.roles=[],this.default_url="",this.timezone="",this.status=!0,this.companyVal=[],this.password="";this.username=""},selectRule:function(t){this.roles=t},createOrUpdate:function(){this.is_creat_new?this.createUser():this.upDataUser()},createUser:function(){var t=this,e=this.vaify();if(e)this.$msg(this.$t(e),"error");else{var i={company:this.company,username:this.username,email:this.email,password:this.password,roles:this.roles,timezone:this.timezone,status:this.status};this.$request_any("users","post",i).then(function(e){t.$msg(t.$t("table.success")),t.$emit("ShowDiv",!0)})}},upDataUser:function(){var t=this,e=this.vaifyUserUpdata();if(e)this.$msg(this.$t(e),"error");else{var i={email:this.email,status:this.status,timezone:this.timezone,roles:this.roles};this.$request_any("users/"+this.user_id+"/","patch",i).then(function(e){t.$msg(t.$t("table.success")),t.$emit("ShowDiv",!0)})}},choseTime:function(t){this.timezone=t},seletCompany:function(t){this.company=t}},computed:{showDiv:{get:function(){return this.showTrakPage},set:function(t){this.$emit("ShowDiv",t)}}},components:{companyList:L.a,timeZone:h.a,companyRules:J,rulesSelect:C}},W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"media_width_40_800"},[i("el-dialog",{attrs:{title:t.is_creat_new?t.$t("table.add_user"):t.$t("table.update_user"),visible:t.showDiv},on:{"update:visible":function(e){t.showDiv=e},open:t.open}},[t.is_creat_new?i("company-list",{attrs:{"company-val":t.company},on:{seletCompany:t.seletCompany}}):t._e(),t._v(" "),t.is_creat_new?i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.username"))+":")]),t._v(" "),i("el-input",{attrs:{placeholder:t.$t("table.please_input")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1):t._e(),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.email"))+":")]),t._v(" "),i("el-input",{attrs:{readonly:"",onfocus:"this.removeAttribute('readonly');",placeholder:t.$t("table.please_input")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),t.is_creat_new?i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.password"))+":")]),t._v(" "),i("el-input",{attrs:{type:"password",readonly:"",onfocus:"this.removeAttribute('readonly');",placeholder:t.$t("table.please_input")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):t._e(),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.chose_time_zone"))+":")]),t._v(" "),i("time-zone",{staticClass:"width_100",attrs:{"time-zone":t.timezone},on:{choseTime:t.choseTime}})],1),t._v(" "),t.company?i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.role_name"))+":")]),t._v(" "),i("company-rules",{staticClass:"width_100",attrs:{companyId:t.company,roles:t.roles},on:{selectRule:t.selectRule}})],1):t._e(),t._v(" "),i("div",{staticClass:"display_flex media_flex_row_800 flex_align_center margin_top_10"},[i("div",{staticClass:"media_width_40_800"},[t._v(t._s(t.$t("table.status"))+":")]),t._v(" "),i("el-switch",{staticClass:"margin_top_10 width_100",attrs:{"active-text":t.$t("table.active"),"inactive-text":t.$t("table.disable")},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createOrUpdate()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)};W._withStripped=!0;var K={render:W,staticRenderFns:[]},Q=K;var G=!1;var X=i("VU/8")(H,Q,!1,function(t){G||i("gNCv")},null,null);X.options.__file="src/components/creat_user/index.vue";var Y=X.exports,tt=new(i("7+uW").a),et={props:{showChangeDiv:{type:Boolean,default:function(){return!0}},userid:{}},computed:{userid_:function(){return this.userid},showChangeDiv_:{get:function(){return this.showChangeDiv},set:function(t){this.$emit("closeChangeDiv")}}},methods:{open:function(){this.password=""},vaify:function(){if(!this.validate_input.check(this.password,"login_password_reg"))return"validate.password"},changepassword:function(){var t=this,e=this.vaify();e?this.$msg(this.$t(e),"error"):this.$request_any("users/change_pwd/"+this.userid_+"/","patch",{password:this.password}).then(function(e){t.$msg(t.$t("table.success")),t.$emit("closeChangeDiv")})}},data:function(){return{password:""}}},it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"changepassword_",attrs:{title:t.$t("table.change_password"),visible:t.showChangeDiv_},on:{open:function(e){t.open()},"update:visible":function(e){t.showChangeDiv_=e}}},[i("div",[i("div",{staticClass:"display_flex media_flex_row_800  flex_align_center margin_top_10"},[i("el-input",{attrs:{placeholder:t.$t("table.please_input_new_password")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),i("el-button",{staticClass:"width_100 margin_top_10",attrs:{type:"primary"},on:{click:t.changepassword}},[t._v(t._s(t.$t("table.confirm")))])],1)])};it._withStripped=!0;var st={render:it,staticRenderFns:[]},at=st;var nt=!1;var lt=i("VU/8")(et,at,!1,function(t){nt||i("yW+O")},null,null);lt.options.__file="src/components/change_password/index.vue";var ot=lt.exports,rt={props:{showTrakPage:{type:Boolean},companyId:{}},mounted:function(){var t=this;tt.$on("createOrUpdateSuccess",function(e){t.companyId&&t.getUsersOftheCompany()})},data:function(){return{listLoading:!0,innerVisible:!1,rule_list:[],rule_obj:null,users:[],showChangeDiv:!1,userid:""}},methods:{changePassWord:function(t){this.userid=t.id,this.showChangeDiv=!0},updataUser:function(t){t.company_id=this.companyId,this.$emit("updataUser",t)},open:function(){this.listLoading=!0,this.getUsersOftheCompany()},getUsersOftheCompany:function(){var t=this;this.$request_any("users/list/"+this.companyId+"/","get").then(function(e){t.listLoading=!1,t.users=e.data.users})},EditRule:function(t){this.rule_obj=t,this.innerVisible=!0},cloeseCreatUserRule:function(t){this.innerVisible=!1}},computed:{showDiv:{get:function(){return this.showTrakPage},set:function(t){this.$emit("closeDiv")}}},components:{creatRule:z,changePassword:ot}},ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"rule_box"}},[i("change-password",{attrs:{"show-change-div":t.showChangeDiv,userid:t.userid},on:{closeChangeDiv:function(e){t.showChangeDiv=!1}}}),t._v(" "),i("el-dialog",{attrs:{title:t.$t("table.user_list"),visible:t.showDiv},on:{open:t.open,"update:visible":function(e){t.showDiv=e}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[i("el-table-column",{attrs:{align:"center",label:"id",type:"index"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"name",label:t.$t("table.username")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.state")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("table.active")))]):i("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("table.disable")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"timezone",label:t.$t("table.time_zone")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.role_name")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.roles,function(e){return i("el-tag",{key:e.id,staticClass:"margin_bottom_1 display_block",attrs:{type:"success"}},[t._v(t._s(e.name))])})}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.edit"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.show_edit_user?i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){t.updataUser(e.row)}}},[t._v(t._s(t.$t("table.edit")))]):t._e(),t._v(" "),t.show_change_user_password?i("el-button",{attrs:{size:"mini",plain:""},on:{click:function(i){t.changePassWord(e.row)}}},[t._v(t._s(t.$t("table.change_password")))]):t._e()]}}])})],1)],1)],1)};ct._withStripped=!0;var _t={render:ct,staticRenderFns:[]},ut=_t;var pt=!1;var dt=i("VU/8")(rt,ut,!1,function(t){pt||i("jh4c")},null,null);dt.options.__file="src/components/user_list/index.vue";var mt=dt.exports,ht=(i("cAgV"),i("0xDb"),{name:"complexTable",components:{rulEdit:P,creatUser:Y,userList:mt,createUpdateCompany:d},mounted:function(){this.getComlist(1,this.has_to_company)},data:function(){return{rulEditShow:!1,userShow:!1,is_show:!1,user_obj:null,company_id:"",count:0,status:!0,companly_option:[],list:null,total:null,Disabled:!0,listLoading:!0,dialogFormVisible:!1,dialogFormVisible1:!1,dialogStatus:"",page:1,companyObj:null,show_company:!1}},methods:{close:function(t){this.show_company=!1,t&&this.getComlist()},has_to_company:function(){localStorage.has_to_company||this.guide(),localStorage.has_to_company=1},guide:function(){this.driver=new s,this.driver.defineSteps(a),this.driver.start()},ShowDiv:function(t){t&&tt.$emit("createOrUpdateSuccess"),this.is_show=!1},createuser:function(){this.user_obj=null,this.is_show=!0},updataUser:function(t){this.user_obj=t,this.is_show=!0},showUsers:function(t){this.company_id=t.id,this.userShow=!0},showRule:function(t){this.company_id=t.id,this.rulEditShow=!0},getComlist:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments[1],s=this;this.$request_any("company","get",{page:e,capacity:12}).then(function(a){t.count=a.data.count;s.companly_option=a.data.results,i&&i(),t.listLoading=!1,t.page=e})},CompanyManager:function(t){this.companyObj=t,this.show_company=!0}}}),vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("rul-edit",{attrs:{showTrakPage:t.rulEditShow,companyId:t.company_id},on:{closeDiv:function(e){t.rulEditShow=!1}}}),t._v(" "),i("creat-user",{attrs:{"show-trak-page":t.is_show,"user-obj":t.user_obj},on:{ShowDiv:t.ShowDiv}}),t._v(" "),i("user-list",{attrs:{showTrakPage:t.userShow,companyId:t.company_id},on:{updataUser:t.updataUser,closeDiv:function(e){t.userShow=!1}}}),t._v(" "),i("div",{staticClass:"filter-container"},[t.show_add_user?i("el-button",{staticClass:"filter-item float_right create_user",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:t.createuser}},[t._v(t._s(t.$t("table.add_user")))]):t._e(),t._v(" "),t.show_add_company?i("el-button",{staticClass:"filter-item float_right create_company",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:function(e){t.CompanyManager()}}},[t._v(t._s(t.$t("table.add_company")))]):t._e()],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.companly_option,border:""}},[i("el-table-column",{attrs:{align:"center",prop:"name",label:t.$t("table.company_name"),width:"180"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"domain",label:t.$t("table.website")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"tracking_domain",label:t.$t("table.traking_domain")}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.state")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("table.active")))]):i("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("table.disable")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"330",align:"center",label:t.$t("table.edit")},scopedSlots:t._u([{key:"default",fn:function(e){return[t.show_edit_company?i("el-button",{staticClass:"meidia_margin_top_3",class:{first_tr_updata:t.companly_option[0].id==e.row.id},attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){t.CompanyManager(e.row)}}},[t._v(t._s(t.$t("table.edit")))]):t._e(),t._v(" "),t.show_role_list?i("el-button",{staticClass:"meidia_margin_top_3",class:{first_tr_rules:t.companly_option[0].id==e.row.id},attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){t.showRule(e.row)}}},[t._v(t._s(t.$t("table.roles")))]):t._e(),t._v(" "),t.show_user_list?i("el-button",{staticClass:"meidia_margin_top_3",class:{first_tr_userlist:t.companly_option[0].id==e.row.id},attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){t.showUsers(e.row)}}},[t._v(t._s(t.$t("table.user_list")))]):t._e()]}}])})],1),t._v(" "),i("create-update-company",{attrs:{"show-company":t.show_company,"company-obj":t.companyObj},on:{close:t.close}}),t._v(" "),i("el-pagination",{staticClass:"text_center margin_top_10",attrs:{background:"",layout:"prev, pager, next","page-size":12,total:t.count,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"current-change":t.getComlist}})],1)};vt._withStripped=!0;var ft={render:vt,staticRenderFns:[]},bt=ft;var yt=!1;var gt=i("VU/8")(ht,bt,!1,function(t){yt||i("z7Pe")},null,null);gt.options.__file="src/views/companylist/index.vue";e.default=gt.exports},"yW+O":function(t,e,i){var s=i("1JlR");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("4ac15576",s,!1)},z7Pe:function(t,e,i){var s=i("9zVR");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("6fc6f9ab",s,!1)}});
webpackJsonp([6],{"2CVV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),n=a.n(i),r=a("hlVY"),s=a("fsHh"),c=a("XLwt"),o=a.n(c),l=a("0xDb");a("tcAE");var d={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"700px"},dataStatistics:{type:Array}},data:function(){return{chart:null,clicks:[],repeat_click:[],new_conversion:[],repeated_conversion:[],conversion:[],xAxis:[]}},watch:{dataStatistics:function(){var t=this;this.setArrayEmpty();var e=this.dataStatistics;for(var a in e)this.xAxis.push(a);e.map(function(e){t.clicks.push(e.click_count),t.repeat_click.push(e.unique_click_count),t.new_conversion.push(e.unique_conversion),t.repeated_conversion.push(e.repeated_conversion),t.conversion.push(e.conversion)}),this.initChart()}},mounted:function(){var t=this;this.__resizeHanlder=Object(l.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{setArrayEmpty:function(){this.xAxis=[],this.clicks=[],this.repeat_click=[],this.new_conversion=[],this.repeated_conversion=[],this.conversion=[]},initChart:function(){this.chart=o.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["点击","排重点击","新增转化","重复转化","转化"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.xAxis}],yAxis:[{type:"value"}],series:[{name:"点击",type:"bar",stack:"点击",data:this.clicks,barwidth:10},{name:"排重点击",type:"bar",stack:"点击",data:this.repeat_click},{name:"新增转化",type:"bar",stack:"转化",data:this.new_conversion},{name:"重复转化",type:"bar",stack:"转化",data:this.repeated_conversion},{name:"转化",type:"bar",data:this.conversion}]})}}},h=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"media_height_300",class:this.className,style:{width:this.width}})};h._withStripped=!0;var _={render:h,staticRenderFns:[]},u=_;var p=a("VU/8")(d,u,!1,null,null,null);p.options.__file="src/views/data_statistics/components/echarts.vue";var v=p.exports,f=a("Gu7T"),m=a.n(f),b={name:"complexTable",components:{},props:{dataStatistics:{type:Array,default:[]},childArr:{type:Array}},data:function(){return{listLoading:!1,childIndex:0}},watch:{childArr:function(t){var e;t.map(function(t,e,a){a[e].ischild=!0,a[e].trackerName+=" "}),this.$set(this.dataStatistics_[this.childIndex],"childNum",t.length),(e=this.dataStatistics_).splice.apply(e,[this.childIndex+1,0].concat(m()(t)))}},computed:{dataStatistics_:function(){return Object(l.b)(this.dataStatistics)},getPostbackLength:function(){if(this.dataStatistics.length){for(var t=this.dataStatistics,e=t[0].postback_list.length,a=0;a<t.length;a++)e<t[a].postback_list.length&&(e=t[a].postback_list.length);return e}}},methods:{dataArrayPush:function(t){this.childIndex=t.$index,this.$set(t.row,"isselected",!t.row.isselected),t.row.isselected?this.$emit("arrpush",t.row):this.dataStatistics_.splice(t.$index+1,t.row.childNum)},Fibonacci:function(t,e){var a=this.dataStatistics_;if(t.ischild)for(var i=e;i>0;i--)if(!a[i].ischild){var n=a[i][a[i].searchValue],r=a[i].searchValue,s={name:a[i][a[i].searchType],params_obj:{type:r,value:n,query:"&"+r+"="+n}};break}this.$emit("getTrak",{res:t,parentBreadObj:s})},seletApp:function(t){}}},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataStatistics_,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:t.$t("table.item"),width:"165"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.Fibonacci(e.row,e.$index)}}},[t._v("\n         "+t._s(e.row[e.row.searchType]))]),t._v(" "),e.row.ischild?t._e():a("i",{staticClass:"el-icon-caret-right",class:{isselected:e.row.isselected},on:{click:function(a){t.dataArrayPush(e)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"click_count",align:"center",label:t.$t("table.click")}}),t._v(" "),a("el-table-column",{attrs:{prop:"unique_click_count",align:"center",label:t.$t("table.unique_click")}}),t._v(" "),a("el-table-column",{attrs:{prop:"postback_count",align:"center",label:t.$t("table.conversion")}}),t._v(" "),a("el-table-column",{attrs:{prop:"unique_postback_count",align:"center",label:t.$t("table.unique_conversion")}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:t.$t("table.convertion_rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fixed2")(100*e.row.conversion))+"%\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:t.$t("table.unique_convertion_rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fixed2")(100*e.row.unique_conversion))+"%\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:t.$t("table.dup_convertion_rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fixed2")(e.row.unique_conversion/(e.row.conversion||1)*100))+"%\n        ")]}}])})],1)],1)};g._withStripped=!0;var y={render:g,staticRenderFns:[]},x=y;var w=!1;var k=a("VU/8")(b,x,!1,function(t){w||a("pln4")},null,null);k.options.__file="src/views/data_statistics/components/data_table.vue";var $=k.exports,S={data:function(){return{height_:""}},mounted:function(){this.height_=window.innerHeight-84-100+"px"}},j=function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height_},attrs:{id:"data_box"}},[this._m(0)])};j._withStripped=!0;var q={render:j,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"box_container"}},[e("div",[this._v("1")]),this._v(" "),e("div",[this._v("2")])])}]},A=q;var T=!1;var V=a("VU/8")(S,A,!1,function(t){T||a("Issl")},null,null);V.options.__file="src/views/data_statistics/components/box.vue";var z=V.exports,C=a("eey7"),E={components:{echartBar:v,dataTable:$,box:z,appList:s.a,timeZone:r.a,datePicker:C.a},data:function(){return{data_statistics:[],app_id:"",child_arr:[],appName:"",bread_arr:[],startTime:"",endTime:"",start_time_month_day:"",end_time_month_day:"",timezone:localStorage.timezone,search_time:[]}},mounted:function(){this.getParams()},computed:{full_start_time:function(){return this.search_time[0]+this.timezone},full_end_time:function(){return this.search_time[1]+this.timezone}},methods:{dateChange:function(t){this.search_time=t},getParams:function(){var t=this.$route.query.appKey,e=this.$route.query.name;t&&this.seletApp({key:t,name:e})},choseTime:function(t){this.timezone=t},vaify:function(){var t=/\d{4}-\d{1,2}-\d{1,2}T\d{2}:\d{2}:\d{2}[+-]\d{1,2}/;return t.test(this.full_start_time)&&t.test(this.full_end_time)?this.app_id?void 0:"validate.app":"validate.time"},search:function(){if(this.bread_arr.length){var t=this.bread_arr[this.bread_arr.length-1].params_obj;this.getlist(t.searchBywhich,t.value_)}else this.$msg(this.$t("validate.app"),"error")},getBread:function(t,e){this.bread_arr.splice(e+1),this.getlist(t.params_obj.type,t.params_obj.value)},arrpush:function(t){var e=t.searchValue;this.getlist(e,t[e]?t[e]:"",!0)},getTrak:function(t){var e,a=t.res,i=t.parentBreadObj,r=this.removePlace(a[a.searchType]),s=!0,c=!1,o=void 0;try{for(var l,d=n()(this.bread_arr);!(s=(l=d.next()).done);s=!0){if(l.value.name==r){e=!0;break}}}catch(t){c=!0,o=t}finally{try{!s&&d.return&&d.return()}finally{if(c)throw o}}if(!e){var h=this.bread_arr[this.bread_arr.length-1].params_obj.query;i&&(i.params_obj.query+=h,this.bread_arr.push(i));h=this.bread_arr[this.bread_arr.length-1].params_obj.query;this.bread_arr.push({name:r,params_obj:{type:a.searchValue,value:a[a.searchValue],query:h+"&"+a.searchValue+"="+a[a.searchValue]}})}this.getlist()},getlist:function(t,e,a){var i=this,r=this.vaify();if(r)this.$msg(this.$t(r),"warning");else{var s=("?begin="+this.full_start_time+"&end="+this.full_end_time+"&appKey="+this.app_id).replace(/[+]/g,"%2B");s=s+(this.bread_arr.length?this.bread_arr[this.bread_arr.length-1].params_obj.query:"")+(a?"&"+t+"="+e:""),this.$request_any("data_statistics"+s,"get").then(function(t){var e=t.data.content;e.length||i.$msg(i.$t("table.no_data"),"warning");var r=!0,s=!1,c=void 0;try{for(var o,l=n()(e);!(r=(o=l.next()).done);r=!0){var d=o.value;i.$set(d,"searchValue",t.data.column_key),i.$set(d,"searchType",t.data.column_name)}}catch(t){s=!0,c=t}finally{try{!r&&l.return&&l.return()}finally{if(s)throw c}}a?i.child_arr=e:i.data_statistics=e})}},seletApp:function(t){this.app_id=t.key,this.appName=t.name,this.bread_arr=[{name:t.name,params_obj:{query:""}}],this.getlist()}}},N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"margin_top_10 padding_left_20 filter-container"},[a("app-list",{staticClass:"display_inline_block",staticStyle:{width:"200px"},attrs:{"app-id":t.app_id},on:{seletApp:t.seletApp}}),t._v(" "),a("datePicker",{staticClass:"display_inline_block",attrs:{"search-time":t.search_time},on:{dateChange:t.dateChange}}),t._v(" "),a("time-zone",{staticClass:"display_inline_block",attrs:{"time-zone":t.timezone},on:{choseTime:t.choseTime}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(t._s(t.$t("table.search")))])],1),t._v(" "),a("div",{staticClass:"padding_left_20 padding_top_20"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.bread_arr,function(e,i){return a("el-breadcrumb-item",{key:e.name,nativeOn:{click:function(a){t.getBread(e,i)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),t.data_statistics?a("data-table",{attrs:{"child-arr":t.child_arr,"data-statistics":t.data_statistics},on:{arrpush:t.arrpush,getTrak:t.getTrak}}):t._e(),t._v(" "),a("echart-bar",{attrs:{"data-statistics":t.data_statistics}})],1)};N._withStripped=!0;var P={render:N,staticRenderFns:[]},Z=P;var F=!1;var L=a("VU/8")(E,Z,!1,function(t){F||a("wNqH")},null,null);L.options.__file="src/views/data_statistics/index.vue";e.default=L.exports},Issl:function(t,e,a){var i=a("x4sf");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3d77d20e",i,!1)},SQYi:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n#add_company label {\n  width: 130px !important;\n}\n.el-icon-caret-right {\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n.isselected {\n  -webkit-transform: rotateZ(90deg);\n          transform: rotateZ(90deg);\n}\n@media screen and (max-width: 900px) {\n.el-dialog {\n    width: 90%;\n}\n}\n",""])},d0hK:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},pln4:function(t,e,a){var i=a("SQYi");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("fbf0320e",i,!1)},wNqH:function(t,e,a){var i=a("d0hK");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("37a9260f",i,!1)},x4sf:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n#data_box {\n  margin-top: 50px;\n  width: 90%;\n  margin: auto;\n  height: 100%;\n  -webkit-perspective: 1200px;\n          perspective: 1200px;\n}\n#data_box #box_container {\n  height: 100%;\n  width: 100%;\n  position: relative;\n  -webkit-transform-style: preserve-3d;\n          transform-style: preserve-3d;\n}\n#data_box #box_container > div {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n#data_box #box_container > div:nth-child(1) {\n  background: pink;\n  -webkit-transform: rotateX(60deg) translateZ(350px);\n          transform: rotateX(60deg) translateZ(350px);\n}\n#data_box #box_container > div:nth-child(2) {\n  -webkit-transform: rotateX(-30deg) translateZ(350px);\n          transform: rotateX(-30deg) translateZ(350px);\n  background: blue;\n}\n",""])}});